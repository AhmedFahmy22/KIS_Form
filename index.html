<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Online Admission Enquiry</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
<style>
    body { background:#f4f6f9; font-family: 'Poppins', sans-serif;
    /* background-image: url(KIS_B_img3.jpg);
    background-size: contain; */
    height: fit-content;
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: rgb(252, 225, 117); 
    padding: 10px;   
}
    .form-card { max-width: 650px; margin: 0 auto; background:white; padding:25px; border-radius:14px; box-shadow:0 6px 20px #0002; overflow:hidden; }
    .slide-wrapper { display:flex; width:200%; transition:transform .45s ease; }
    .step { width:50%; padding:0 25px; }
    #successOverlay { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,.7); backdrop-filter:blur(4px); justify-content:center; align-items:center; }
    .successBox { background:white; padding:35px; border-radius:16px; max-width:420px; text-align:center; }
    #logo-div {
        display: flex;
        justify-content: center;
        align-items: center;
        justify-self: flex-start;
    }
    #header-div h2 {
        justify-self: center;
    }
    #logo-div img {
        width: 100px;
    }
    #header-div {
        display: flex;
        align-items: center;
        margin-bottom: 20px;
        margin-left: 10px;
        gap: 15px;
    }
    #background-overlay {
        padding: 10px;
        background-color: rgba(0, 0, 0, 0.404);
        height: 100%;
    }
    #step2 {
        display: none;
    }
</style>
</head>
<body>

<!-- <div id="background-overlay"> -->
    <div class="form-card">
    <div id="header-div">
        <div id="logo-div"><img src="international-logo2.png" alt=""></div>
        <h2 class="text-center">KIS Admission Enquiry</h2>
    </div>

    <div id="slider" class="slide-wrapper">

        <!-- STEP 1 -->
        <form id="step1" class="step">
            <h4 class="mb-3 text-primary">Student Information</h4>

            <div class="mb-3">
                <label class="form-label">Student Name *</label>
                <input type="text" name="studentName" class="form-control" required />
            </div>

            <div class="mb-3">
                <label class="form-label">Academic Year *</label>
                <select name="academicYear" class="form-select" required>
                    <option value="">Choose...</option>
                    <option>2025-2026</option>
                    <option>2026-2027</option>
                </select>
            </div>

            <div class="mb-3">
                <label class="form-label">Grade *</label>
                <select name="grade" class="form-select" required>
                    <option value="">Choose...</option>
                    <option>Year 1</option>
                    <option>Year 2</option>
                    <option>Year 3</option>
                    <option>Year 4</option>
                    <option>Year 5</option>
                    <option>Year 6</option>
                </select>
            </div>

            <div class="mb-3">
                <label class="form-label">Date of Birth *</label>
                <input type="date" name="dob" class="form-control" required />
            </div>

            <button type="submit" id="nextBtn" class="btn btn-primary w-100">Next</button>
        </form>

        <!-- STEP 2 -->
        <form id="step2" class="step">
            <h4 class="mb-3 text-primary">Parent Information</h4>

            <div class="row g-3">
                <div class="col-12 col-md-6">
                    <label class="form-label">Father Name *</label>
                    <input type="text" name="fatherName" class="form-control" required />
                </div>

                <div class="col-12 col-md-6">
                    <label class="form-label">Mother Name *</label>
                    <input type="text" name="motherName" class="form-control" required />
                </div>

                <div class="col-12 col-md-6">
                    <label class="form-label">Mobile Number *</label>
                    <input type="tel" name="mobileNumber" class="form-control" required />
                </div>

                <div class="col-12 col-md-6">
                    <label class="form-label col-12">Preferred Interview *</label>
                    <!-- <select name="interviewMethod" class="form-select" required>
                        <option value="">Choose...</option>
                        <option>School Premises</option>
                        <option>Online</option>
                    </select> -->
                    <input type="radio" checked id="contactChoice1" name="interviewMethod" value="premises" class="col-2"/>
                    <label for="contactChoice1" class="col-9">School Premises</label>
                    <input type="radio" id="contactChoice2" name="interviewMethod" value="online" class="col-2"/>
                    <label for="contactChoice2"class="col-9">Online</label>
                </div>

                <div class="col-12">
                    <label class="form-label">Full Address *</label>
                    <input type="text" name="address" class="form-control" required />
                </div>

                <div class="col-12 col-md-6">
                    <label class="form-label">Father Occupation *</label>
                    <input type="text" name="fatherJob" class="form-control" required />
                </div>

                <div class="col-12 col-md-6">
                    <label class="form-label">Mother Occupation *</label>
                    <input type="text" name="motherJob" class="form-control" required />
                </div>

                <div class="col-12">
                    <label class="form-label">Email *</label>
                    <input type="email" name="email" class="form-control" required />
                </div>
            </div>

            <div class="mt-4 d-flex gap-2">
                <button type="button" id="backBtn" class="btn btn-secondary w-100">Back</button>
                <button type="button" id="resetBtn" class="btn btn-warning w-100">Reset</button>
                <button type="submit" id="submitBtn" class="btn btn-success w-100">Submit</button>
            </div>
        </form>

    </div>
<!-- </div> -->
</div>

<!-- Success Message -->
<div id="successOverlay">
    <div class="successBox">
        <h3>Thank you!</h3>
        <p>Your enquiry has been submitted successfully.</p>
        <button id="successReset" class="btn btn-warning mt-3 w-100">Reset Form</button>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
const slider = document.getElementById("slider");
const nextBtn = document.getElementById("nextBtn");
const backBtn = document.getElementById("backBtn");
const resetBtn = document.getElementById("resetBtn");
const successOverlay = document.getElementById("successOverlay");
const step2_div = document.getElementById("step2");

// Restore saved data
document.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll("input, select").forEach(el => {
        if (localStorage.getItem(el.name)) el.value = localStorage.getItem(el.name);
    });
});

// Auto-save inputs
document.querySelectorAll("input, select").forEach(el => {
    el.addEventListener("input", () => localStorage.setItem(el.name, el.value));
});

function validateFirstForm() {
  const form = document.getElementById('step1'); // Replace 'yourFormId' with the actual ID of your form
  const inputs = form.querySelectorAll('input, textarea, select'); // Select all input, textarea, and select elements

  for (let i = 0; i < inputs.length; i++) {
    const field = inputs[i];

    // Skip fields that are not required or are hidden
    if (field.hasAttribute('required') || (field.type !== 'hidden' && field.type !== 'submit' && field.type !== 'button')) {
      if (field.value.trim() === '') {
        alert('Please fill in all required fields.'); // Or display a more specific error message
        field.focus(); // Focus on the empty field for user convenience
        return false; // Prevent form submission
      }
    }
  }

  return true; // All required fields are filled, allow form submission
}

// SLIDE NEXT
nextBtn.addEventListener("click", (e) => {
    e.preventDefault();
    if(validateFirstForm()) {
        slider.style.transform = "translateX(-50%)"
        step2_div.style.display = "block"
    }
});

// SLIDE BACK
backBtn.addEventListener("click", () => {
    slider.style.transform = "translateX(0%)"
    step2_div.style.display = "none"
});

// RESET (inside form)
resetBtn.addEventListener("click", () => {
    if (!confirm("Are you sure you want to reset the entire form?")) return;

    localStorage.clear();
    document.querySelectorAll("input, select").forEach(el => el.value = "");
    slider.style.transform = "translateX(0%)";
});

// SUCCESS RESET
successReset.addEventListener("click", () => {
    if (!confirm("Are you sure you want to start over?")) return;

    localStorage.clear();
    document.querySelectorAll("input, select").forEach(el => el.value = "");
    successOverlay.style.display = "none";
    slider.style.transform = "translateX(0%)";
});


// SUBMIT
step2.addEventListener("submit", e => {
    e.preventDefault();

    let formData = new FormData();
    document.querySelectorAll("input, select").forEach(el => formData.append(el.name, el.value));

    fetch("https://script.google.com/macros/s/AKfycbwKHdnUW8Fw8WmtPKZgR6okEkKwUP98iNZMzXO6_EInIQ8MjK59WEJzy_BzeGNra6M3Xw/exec", {
        method: "POST",
        body: formData
    })
    .then(() => {
        successOverlay.style.display = "flex";
        localStorage.clear();
    })
    .catch(() => alert("Submission failed"));
});
</script>

</body>
</html>
